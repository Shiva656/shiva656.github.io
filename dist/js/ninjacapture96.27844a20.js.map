{"version":3,"sources":["webpack:///./src/js/core/data.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/core-js/modules/es.array.index-of.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js"],"names":["axios","require","PCors","Region","window","region","Data","url","params","this","eval","pcors","offset","limit","enableOffset","headers","withCredentials","PCors_URL","encodeURIComponent","append","prepend","indexOf","console","log","getLimit","getOffset","getParams","get","getPCors","getConfig","result","data","incrementOffset","id","form","post","apps","formData","put","delete","replace","count","FormData","Object","keys","forEach","key","edit","config","head","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","_createClass","Constructor","protoProps","staticProps","prototype","$","$indexOf","arrayMethodIsStrict","arrayMethodUsesToLength","nativeIndexOf","NEGATIVE_ZERO","STRICT_METHOD","USES_TO_LENGTH","ACCESSORS","1","proto","forced","searchElement","apply","arguments","undefined","_classCallCheck","instance","TypeError"],"mappings":"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","file":"js/ninjacapture96.27844a20.js","sourcesContent":["const axios = require(\"axios\");\n\n// import JWT from \"./jwt\";\n\n// eslint-disable-next-line\nconst PCors = \"https://my.${region}.500apps.com/pcors\";\n\nconst Region = window.region;\n\nexport default class Data {\n  constructor(url, params) {\n    // eslint-disable-next-line\n    let region = Region;\n    this.url = eval(\"`\" + url + \"`\");\n\n    if (params) this.params = params;\n\n    // if (jwt) this.jwt = jwt;\n\n    this.pcors = true;\n\n    this.offset = 0;\n    this.limit = 50;\n\n    // Enable Offset\n    this.enableOffset = false;\n  }\n\n  useOffset() {\n    this.enableOffset = true;\n    this.limit = 25;\n  }\n\n  disablePCors() {\n    this.pcors = false;\n  }\n\n  // getJWT() {\n  //   if (this.jwt) return this.jwt;\n  //   return JWT.getJWT();\n  // }\n\n  getConfig() {\n    return {\n      headers: {\n        // Authorization: `Bearer ${this.getJWT()}`,\n        withCredentials: true,\n      },\n    };\n  }\n\n  getPCors(url) {\n    if (!url) url = this.url;\n\n    // Return URL directly if pcors is disabled\n    if (!this.pcors) return url;\n\n    // Use base url if not present - detail URL eg: /flow/{id} can overwrite\n    let PCors_URL = `${PCors}?url=${encodeURIComponent(url)}`;\n    PCors_URL = eval(\"`\" + PCors_URL + \"`\");\n    return PCors_URL;\n  }\n\n  getOffset(url) {\n    if (!this.enableOffset) return url;\n    url = this.append(url, `offset=${this.offset}`);\n    return url;\n  }\n\n  setOffset(offset) {\n    this.offset = offset;\n  }\n\n  incrementOffset() {\n    this.offset += this.limit;\n  }\n\n  getLimit(url) {\n    url = this.append(url, `limit=${this.limit}`);\n    return url;\n  }\n\n  getParams(url) {\n    if (!this.params) return url;\n    return this.append(url, this.params);\n  }\n\n  setParams(params) {\n    if (params) this.params = params;\n  }\n  append(url, params) {\n    if (!url) url = \"\";\n    let prepend = \"?\";\n    if (url.indexOf(\"?\") != -1) prepend = \"&\";\n\n    url = `${url}${prepend}${params}`;\n    return url;\n  }\n\n  async get() {\n    console.log(\"Getting\", this.url);\n\n    let url = this.url;\n    url = this.getLimit(url);\n    url = this.getOffset(url);\n    url = this.getParams(url);\n\n    /*let url = null;\n    if (this.params) url = `${this.url}?${this.params}`;*/\n\n    let result = await axios.get(this.getPCors(url), this.getConfig());\n    result = result.data;\n\n    // Increment the offset\n    this.incrementOffset();\n\n    return result;\n  }\n\n  async get_details(id) {\n    console.log(\"Getting\", this.url, id);\n\n    let url = `${this.url}/${id}`;\n\n    let result = await axios.get(this.getPCors(url), this.getConfig());\n    result = result.data;\n    return result;\n  }\n\n  async add(form) {\n    console.log(\"Adding new\", this.url, form);\n    let apps = await axios.post(this.getPCors(), { data: [form] }, this.getConfig());\n    return apps.data;\n  }\n\n  async edit(id, formData) {\n    console.log(\"Editing\", this.url, id, formData);\n    if (!formData.id) formData.id = id;\n    let apps = await axios.put(this.getPCors(), formData, this.getConfig());\n    return apps.data;\n  }\n\n  async delete(id) {\n    console.log(\"Deleting\", this.url, id);\n    let url = `${this.url}?where=id=${id}`;\n    let result = await axios.delete(url, this.getConfig());\n    return result;\n  }\n\n  async count() {\n    // After v2 add aggregate and / count at the end\n    let url = `${this.url.replace(\"/v2\", \"/v2/aggregate\")}/count`;\n    let result = await axios.get(this.getPCors(url), this.getConfig());\n    result = result.data;\n    return result[0].count;\n  }\n  // Change the form to the form data\n  async editForm(id, form) {\n    let formData = new FormData();\n\n    Object.keys(form).forEach((key) => {\n      formData.append(key, form[key]);\n    });\n\n    // console.log(apps.data);\n    let result = await this.edit(id, formData);\n    return result;\n  }\n  // Method for multicalls\n  async multi_call(form) {\n    console.log(\"Adding new\", this.url, form);\n    this.url = this.getParams(this.url);\n    let apps = await axios.post(this.getPCors(), form, this.getConfig());\n    return apps.data;\n  }\n\n  // Page Cache Clear\n  async pageCacheClear() {\n    let config = {\n      headers: {\n        \"secret-header\": true,\n      },\n    };\n    let result = await axios.head(this.getPCors(), config);\n    return result;\n  }\n\n  getURL() {\n    return this.url;\n  }\n  getRegion() {\n    return Region;\n  }\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","'use strict';\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD || !USES_TO_LENGTH }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}"],"sourceRoot":""}