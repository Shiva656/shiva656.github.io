(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mailsend"],{"0d33":function(e,s,t){"use strict";var r=t("d4ec"),n=t("bee2"),a=t("262e"),i=t("2caf"),u=t("a11a"),o="https://api.${region}.500apps.com/mailsend/v1/unsubscribe/",c="https://api.${region}.500apps.com/mailsend/v1/unsubscribe/reason",b="https://api.${region}.500apps.com/mailsend/v1/contacts/",l=function(e){Object(a["a"])(t,e);var s=Object(i["a"])(t);function t(){return Object(r["a"])(this,t),s.apply(this,arguments)}return Object(n["a"])(t,[{key:"getUnsubscribe",value:function(e){var s=o+"".concat(e),t=new u["a"](s);return t.get()}},{key:"editUnsubscribe",value:function(e){var s=o+e,t=new u["a"](s);return t.get()}},{key:"getContacts",value:function(e){var s=b+e,t=new u["a"](s);return t.get()}},{key:"editUnsubscribeReason",value:function(e,s,t){var r=c+e,n=new u["a"](r);return n.disablePCors(),n.edit(t,s)}}]),t}(u["a"]);s["a"]=new l},2594:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",["do"==e.page_name?t("div",[t("DoubleOptin")],1):e._e(),"unsubscribe"==e.page_name?t("div",[t("Unsubscribe")],1):e._e(),"preview"==e.page_name?t("div",[t("Preview")],1):e._e()])},n=[],a=t("bbd3"),i=t("43f4"),u=t("e3b6"),o={name:"Home",components:{Unsubscribe:a["default"],Preview:i["default"],DoubleOptin:u["default"]},data:function(){return{page_name:this.$route.params.page,contact_id:this.$route.params.contact_id}},mounted:function(){console.log("this.page_name",this.page_name,this.contact_id)},methods:{}},c=o,b=t("2877"),l=Object(b["a"])(c,r,n,!1,null,null,null);s["default"]=l.exports},2799:function(e,s,t){"use strict";t("d263")},"43f4":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("b-container",[t("b-row",[t("b-col",{staticClass:"mx-auto",attrs:{md:"7"}},[t("div",{staticClass:"d-flex align-items-center py-4"},[e.unsubscribe_form.logo_url?t("b-img",{attrs:{src:e.unsubscribe_form.logo_url,alt:"logo",height:"40"}}):e._e(),t("h2",{staticClass:"mb-0 ml-2 brand-heading"},[e._v(e._s(e.unsubscribe_form.company_name))])],1),t("b-card",{attrs:{"body-class":"p-45"}},[t("h1",{staticClass:"mb-2"},[e._v("Unsubscribe Successful")]),t("div",{staticClass:"mb-3 font-size-lg"},[t("p",{staticClass:"mb-0"},[e._v("You will no longer receive emails from us")])]),t("div",{staticClass:"mt-4"},[t("h3",{staticClass:"mb-3 pb-1"},[e._v("Please let us know why you unsubscribed?")]),e.options.length>=1?e._e():t("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.reason,callback:function(s){e.reason=s},expression:"reason"}}),t("b-form",{staticClass:"radio-group-mb-4"},[t("b-form-radio-group",{attrs:{stacked:"",options:e.options},model:{value:e.form.unsubscribe_reason,callback:function(s){e.$set(e.form,"unsubscribe_reason",s)},expression:"form.unsubscribe_reason"}})],1),"Other"==e.form.unsubscribe_reason?t("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.reason,callback:function(s){e.reason=s},expression:"reason"}}):e._e(),t("div",{staticClass:"d-flex justify-content-between align-items-center"},[e.unsubscribe_form.redirect_url?t("div",[t("b-link",{attrs:{href:e.unsubscribe_form.redirect_url,target:"_blank",disabled:"true"}},[e._v("Home")])],1):e._e(),t("b-button",{staticClass:"px-4 ml-auto",attrs:{type:"submit",variant:"primary",disabled:"true"}},[e._v(" Submit ")])],1)],1)])],1)],1)],1)},n=[],a=(t("d81d"),t("96cf"),t("1da1")),i=t("0d33"),u={name:"Unsubscribe",components:{},data:function(){return{form:{unsubscribe_reason:""},reason:"",unsubscribe_data:"",options:[],unsubscribe_form:{company_name:"",logo_url:null,redirect_url:""}}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.domain_id=window.domain,e.next=3,i["a"].getUnsubscribe(this.domain_id);case 3:this.unsubscribe_data=e.sent,this.unsubscribe_form.company_name=this.unsubscribe_data[0].company_name,this.unsubscribe_form.logo_url=this.unsubscribe_data[0].logo_url,this.unsubscribe_form.redirect_url=this.unsubscribe_data[0].redirect_url,this.unsubscribe_data[0].unsubscribe_reasons=JSON.parse(this.unsubscribe_data[0].unsubscribe_reasons),this.unsubscribe_data[0].unsubscribe_reasons.length>=1&&(this.unsubscribe_data[0].unsubscribe_reasons.map((function(e){s.options.push({text:e.unsubscribe_reason,value:e.unsubscribe_reason})})),this.options.push({text:"Other (fill in reason below)",value:"Other"}));case 9:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),methods:{}},o=u,c=(t("7ae0"),t("2877")),b=Object(c["a"])(o,r,n,!1,null,null,null);s["default"]=b.exports},"7ae0":function(e,s,t){"use strict";t("f2c1")},bbd3:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return"unSubscribedReason"==e.unsubscribe_status?t("div",[t("b-container",[t("b-row",[t("b-col",{staticClass:"mx-auto",attrs:{md:"7"}},[t("div",{staticClass:"d-flex align-items-center py-4"},[e.unsubscribe_form.logo_url?t("b-img",{attrs:{src:e.unsubscribe_form.logo_url,alt:"logo",height:"40"}}):e._e(),t("h2",{staticClass:"mb-0 ml-2 brand-heading"},[e._v(e._s(e.unsubscribe_form.company_name))])],1),t("b-card",{attrs:{"body-class":"p-45"}},[t("h1",{staticClass:"mb-2"},[e._v("You have been successfully unsubscribed")]),t("div",{staticClass:"mb-3 font-size-lg"},[t("p",{staticClass:"mb-0"},[e._v("You will no longer receive emails from us")])]),e.isUnsubscribed?t("div",{staticClass:"mt-4"},[t("h3",{staticClass:"mb-3 pb-1"},[e._v("Please let us know why you unsubscribed.")]),t("b-form",{staticClass:"radio-group-mb-4",on:{submit:function(s){return s.preventDefault(),e.save(s)}}},[e.options.length>=1?e._e():t("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.form.reason,callback:function(s){e.$set(e.form,"reason",s)},expression:"form.reason"}}),t("b-form-radio-group",{attrs:{stacked:"",options:e.options,required:""},model:{value:e.form.reason,callback:function(s){e.$set(e.form,"reason",s)},expression:"form.reason"}}),"Other"==e.form.reason?t("b-form-textarea",{staticClass:"mb-4 mt-3",attrs:{type:"text",required:"",placeholder:"Enter Unsubscribe reason"},model:{value:e.unsubReason,callback:function(s){e.unsubReason=s},expression:"unsubReason"}}):e._e(),t("div",{staticClass:"d-flex justify-content-between align-items-center"},[e.unsubscribe_form.redirect_url?t("div",[t("b-link",{attrs:{href:e.unsubscribe_form.redirect_url,target:"_blank"}},[e._v("Home")])],1):e._e(),t("b-button",{staticClass:"px-4 ml-auto",attrs:{variant:"primary",type:"submit"}},[e._v(" Submit "),e.clicked?t("b-spinner",{attrs:{variant:"white",small:"",label:"Spinning"}}):e._e()],1)],1)],1),t("div",[e.show_message?t("p",{staticClass:"float-right mt-4 text-danger"},[e._v(e._s(e.message))]):e._e()])],1):e._e()])],1)],1)],1)],1):"unSubscribed"==e.unsubscribe_status?t("div",[t("b-container",[t("b-row",[t("b-col",{staticClass:"mx-auto mt-5",attrs:{md:"7"}},[t("div",{staticClass:"d-flex align-items-center py-4"},[e.unsubscribe_form.logo_url?t("b-img",{attrs:{src:e.unsubscribe_form.logo_url,alt:"logo",height:"40"}}):e._e(),t("h2",{staticClass:"mb-0 ml-2 brand-heading"},[e._v(e._s(e.unsubscribe_form.company_name))])],1),t("b-card",{attrs:{"body-class":"p-45"}},[t("h1",{staticClass:"mb-2"},[e._v("Already you have been unsubscribed")]),t("div",{staticClass:"mb-3 font-size-lg"},[t("p",{staticClass:"mb-0"},[e._v("You will no longer receive emails from us")])])])],1)],1)],1)],1):e._e()},n=[],a=(t("99af"),t("d81d"),t("96cf"),t("1da1")),i=t("0d33"),u={name:"Unsubscribe",components:{},data:function(){return{isUnsubscribed:!0,message:"",show_message:!1,unsubscribe_data:"",options:[],domain_id:"",unsubReason:"",user_id:"",contact_id:"",contact_data:{},unsubscribe_status:"",return_url:!1,form:{reason:""},newsletter_stat_id:"",newsletter_id:"",unsubscribe_form:{company_name:"",logo_url:null,redirect_url:""},clicked:!1,query:""}},mounted:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.domain_id=window.domain,this.contact_id=this.$route.params.contact_id,this.newsletter_id=this.$route.params.newsletter_id,this.newsletter_stat_id=this.$route.params.newsletter_stat_id,this.query=this.$route.query.t,e.next=7,this.saveUnsubscribeStatus();case 7:return e.next=9,i["a"].getUnsubscribe(this.domain_id);case 9:return this.unsubscribe_data=e.sent,this.unsubscribe_form.company_name=this.unsubscribe_data[0].company_name,this.unsubscribe_form.logo_url=this.unsubscribe_data[0].logo_url,this.unsubscribe_form.redirect_url=this.unsubscribe_data[0].redirect_url,this.unsubscribe_data[0].unsubscribe_reasons=JSON.parse(this.unsubscribe_data[0].unsubscribe_reasons),this.unsubscribe_data[0].unsubscribe_reasons.length>=1&&(this.unsubscribe_data[0].unsubscribe_reasons.map((function(e){s.options.push({text:e.unsubscribe_reason,value:e.unsubscribe_reason})})),this.options.push({text:"Other (fill in reason below)",value:"Other"})),e.next=17,this.getContacts();case 17:case"end":return e.stop()}}),e,this)})));function s(){return e.apply(this,arguments)}return s}(),methods:{saveUnsubscribeStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var t;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,i["a"].editUnsubscribe("".concat(e.domain_id,"/").concat(e.contact_id,"/").concat(e.newsletter_id,"/").concat(e.newsletter_stat_id,"?reason=unsubscribe&t=").concat(e.query));case 3:t=s.sent,console.log("Response",t),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.log(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))()},getContacts:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,i["a"].getContacts("".concat(e.domain_id,"/").concat(e.contact_id,"/is-subscribed"));case 2:e.contact_data=s.sent,1==e.contact_data.Status?(e.unsubscribe_status="unSubscribed",e.unsubscribe_form.redirect_url&&setTimeout((function(){window.location.href=e.unsubscribe_form.redirect_url}),1e3)):e.unsubscribe_status="unSubscribedReason";case 4:case"end":return s.stop()}}),s)})))()},save:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.clicked=!0,"Other"==e.form.reason&&(e.form.reason=e.unsubReason),s.prev=2,s.next=5,i["a"].editUnsubscribeReason("/".concat(e.domain_id,"/").concat(e.contact_id),e.form,e.contact_id);case 5:e.clicked=!1,e.isUnsubscribed=!1,e.unsubscribe_form.redirect_url&&setTimeout((function(){window.location.href=e.unsubscribe_form.redirect_url}),1e3),s.next=16;break;case 10:s.prev=10,s.t0=s["catch"](2),e.show_message=!0,e.message="Something went wrong try again.",console.log(s.t0),e.clicked=!1;case 16:setTimeout((function(){e.message="",e.show_message=!1}),5e3);case 17:case"end":return s.stop()}}),s,null,[[2,10]])})))()}}},o=u,c=(t("2799"),t("2877")),b=Object(c["a"])(o,r,n,!1,null,null,null);s["default"]=b.exports},d263:function(e,s,t){},d81d:function(e,s,t){"use strict";var r=t("23e7"),n=t("b727").map,a=t("1dde"),i=t("ae40"),u=a("map"),o=i("map");r({target:"Array",proto:!0,forced:!u||!o},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},f2c1:function(e,s,t){}}]);
//# sourceMappingURL=mailsend.4ad54e70.js.map