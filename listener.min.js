!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=19)}({19:function(e,t){"undefined"==typeof window&&(importScripts("https://www.gstatic.com/firebasejs/6.6.2/firebase-app.js"),importScripts("https://www.gstatic.com/firebasejs/6.6.2/firebase-messaging.js"));class i{constructor(){this.exeMessageApi="",this.messageApi="",this.subscriptionObject={},this.url="",this.launchUrl="",this.pushObj="",this.message_id="",this.execute=!1}init(){self.addEventListener("push",e=>{globalThis=self,this.execute=!1;var t=e.data.json();if(console.log("message",t),t.data.hasOwnProperty("data")){this.pushObj=JSON.parse(t.data.data),this.message_id=this.pushObj.message_id,this.launchUrl=this.pushObj.launch_url;var i=JSON.parse(t.data.notification)}else if(!t.data.hasOwnProperty("data"))i=JSON.parse(t.data.notification);const n=i.title,s={body:i.body,icon:i.icon,image:i.image};t.data.action_button&&(s.actions=JSON.parse(t.data.action_button)),e.waitUntil(self.registration.showNotification(n,s))}),self.addEventListener("notificationclose",e=>{console.log("notificationclose",e);e.notification;this.message_id&&!this.execute&&this.saveUserAction("close","Unclicked")}),self.addEventListener("unhandledrejection",e=>{console.log("unhandledrejection",e)}),self.addEventListener("rejectionhandled",e=>{console.log("rejectionhandled",e)}),self.addEventListener("activate",e=>{self.skipWaiting(),console.log("activate",e)}),self.onunhandledrejection=function(e){console.log("onunhandledrejection",e)},self.onrejectionhandled=function(e){console.log("onrejectionhandled",e)},self.onnotificationclose=function(e){console.log("sss",e)},self.addEventListener("notificationclick",e=>{this.execute=!0,console.log("notificationclick",e),this.launchUrl&&clients.openWindow(this.launchUrl);e.notification;this.message_id&&this.saveUserAction(e.action?e.action:"executed","Clicked"),this.exeMessageApi=""})}saveUserAction(e,t){this.pushObj.action=t,this.pushObj.user_action=e;var i=this.pushObj;fetch(`https://my.${this.pushObj.region}.500apps.com/pcors?url=https://push.${this.pushObj.region}.500apps.com/push/v1/message/log?app_name=push`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","x-api-key":this.pushObj.api_key},body:JSON.stringify(i)})}}(new i).init()}});
