!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=19)}({19:function(t,e){"undefined"==typeof window&&(importScripts("https://www.gstatic.com/firebasejs/6.6.2/firebase-app.js"),importScripts("https://www.gstatic.com/firebasejs/6.6.2/firebase-messaging.js"));class s{constructor(){this.exeMessageApi="",this.messageApi="",this.subscriptionObject={},this.url="",this.launchUrl="",this.pushObj="",this.message_id="",this.execute=!1}init(){self.addEventListener("push",t=>{globalThis=self,this.execute=!1;var e=t.data.json();if(console.log("message",e),e.data.hasOwnProperty("data")){this.pushObj=JSON.parse(e.data.data),this.message_id=this.pushObj.message_id,this.launchUrl=this.pushObj.launch_url;var s=JSON.parse(e.data.notification)}else if(!e.data.hasOwnProperty("data"))s=JSON.parse(e.data.notification);const i=s.title,o={body:s.body,icon:s.icon,image:s.image};e.data.action_button&&(o.actions=JSON.parse(e.data.action_button)),this.ss(i,o)}),self.addEventListener("notificationclose",t=>{console.log("notificationclose",t);t.notification;this.message_id&&!this.execute&&this.saveUserAction("close","Unclicked")}),self.addEventListener("notificationclick",t=>{this.execute=!0,console.log("notificationclick",t),this.launchUrl&&clients.openWindow(this.launchUrl);t.notification;this.message_id&&this.saveUserAction(t.action?t.action:"executed","Clicked"),this.exeMessageApi=""})}saveUserAction(t,e){this.pushObj.action=e,this.pushObj.user_action=t;var s=this.pushObj;fetch(`https://my.${this.pushObj.region}.500apps.com/pcors?url=https://push.${this.pushObj.region}.500apps.com/push/v1/message/log?app_name=push`,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","x-api-key":this.pushObj.api_key},body:JSON.stringify(s)})}ss(t,e){let s=new Notification(t,{body:"fsdfs",title:"fsdfsdf",icon:"",badge:1});s.onclick=function(t){console.log("sss")},s.onerror=function(t){console.log("Notifications closed",t)},s.onclose=function(t){console.log("Notifications closed",t),console.log("sss")}}}(new s).init()}});
